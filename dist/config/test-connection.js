"use strict";function _regenerator(){function b(a,b,f,g){var h=b&&b.prototype instanceof d?b:d,c=Object.create(h.prototype);return _regeneratorDefine2(c,"_invoke",function(a,b,g){function h(a,b){for(q=a,s=b,e=0;!w&&t&&!c&&e<v.length;e++){var c,f=v[e],g=p.p,h=f[2];3<a?(c=h===b)&&(s=f[(q=f[4])?5:(q=3,3)],f[4]=f[5]=j):f[0]<=g&&((c=2>a&&g<f[1])?(q=0,p.v=b,p.n=f[1]):g<h&&(c=3>a||f[0]>b||b>h)&&(f[4]=a,f[5]=b,p.n=h,q=0))}if(c||1<a)return m;throw w=!0,b}var k,q,s,t=0,v=g||[],w=!1,p={p:0,n:0,v:j,a:h,f:h.bind(j,4),d:function c(a,b){return k=a,q=0,s=j,p.n=b,m}};return function(c,d,f){if(1<t)throw TypeError("Generator is already running");for(w&&1===d&&h(d,f),q=d,s=f;(e=2>q?j:s)||!w;){k||(q?3>q?(1<q&&(p.n=-1),h(q,s)):p.n=s:p.v=s);try{if(t=2,k){if(q||(c="next"),e=k[c]){if(!(e=e.call(k,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,2>q&&(q=0)}else 1===q&&(e=k["return"])&&e.call(k),2>q&&(s=TypeError("The iterator does not provide a '"+c+"' method"),q=1);k=j}else if((e=(w=0>p.n)?s:a.call(b,p))!==m)break}catch(a){k=j,q=1,s=a}finally{t=1}}return{value:e,done:w}}}(a,f,g),!0),c}function d(){}function g(){}function h(){}function i(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,h):(a.__proto__=h,_regeneratorDefine2(a,l,"GeneratorFunction")),a.prototype=Object.create(c),a}/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var j,e,f="function"==typeof Symbol?Symbol:{},k=f.iterator||"@@iterator",l=f.toStringTag||"@@toStringTag",m={};e=Object.getPrototypeOf;var a=[][k]?e(e([][k]())):(_regeneratorDefine2(e={},k,function(){return this}),e),c=h.prototype=d.prototype=Object.create(a);return g.prototype=h,_regeneratorDefine2(c,"constructor",h),_regeneratorDefine2(h,"constructor",g),g.displayName="GeneratorFunction",_regeneratorDefine2(h,l,"GeneratorFunction"),_regeneratorDefine2(c),_regeneratorDefine2(c,l,"Generator"),_regeneratorDefine2(c,k,function(){return this}),_regeneratorDefine2(c,"toString",function(){return"[object Generator]"}),(_regenerator=function a(){return{w:b,m:i}})()}function _regeneratorDefine2(a,b,c,d){var f=Object.defineProperty;try{f({},"",{})}catch(a){f=0}_regeneratorDefine2=function e(a,b,c,d){function g(b,c){_regeneratorDefine2(a,b,function(a){return this._invoke(b,c,a)})}b?f?f(a,b,{value:c,enumerable:!d,configurable:!d,writable:!d}):a[b]=c:(g("next",0),g("throw",1),g("return",2))},_regeneratorDefine2(a,b,c,d)}function asyncGeneratorStep(b,d,f,e,g,h,a){try{var c=b[h](a),i=c.value}catch(a){return void f(a)}c.done?d(i):Promise.resolve(i).then(e,g)}function _asyncToGenerator(b){return function(){var c=this,d=arguments;return new Promise(function(e,f){function g(a){asyncGeneratorStep(i,e,f,g,h,"next",a)}function h(a){asyncGeneratorStep(i,e,f,g,h,"throw",a)}var i=b.apply(c,d);g(void 0)})}}// ========================================
// QUICK CONNECTION TEST
// Test your Neon connection without running full migration
// ========================================
var _require=require("pg"),Pool=_require.Pool;require("dotenv").config();var pool=new Pool({connectionString:process.env.DATABASE_URL,ssl:{rejectUnauthorized:!1}});function testConnection(){return _testConnection.apply(this,arguments)}function _testConnection(){return _testConnection=_asyncToGenerator(/*#__PURE__*/_regenerator().m(function a(){var b,c,d,e,f;return _regenerator().w(function(a){for(;1;)switch(a.p=a.n){case 0:return console.log("\n\uD83D\uDD0C Testing Neon Database Connection...\n"),a.p=1,console.log("Test 1: Connecting to database..."),a.n=2,pool.query("SELECT NOW() as current_time");case 2:return b=a.v,console.log("\u2705 Connected successfully!"),console.log("   Server time: ".concat(b.rows[0].current_time)),console.log("\nTest 2: Checking PostgreSQL version..."),a.n=3,pool.query("SELECT version() as pg_version");case 3:return c=a.v,d=c.rows[0].pg_version.split(",")[0],console.log("\u2705 ".concat(d)),console.log("\nTest 3: Checking existing tables..."),a.n=4,pool.query("\n      SELECT table_name \n      FROM information_schema.tables \n      WHERE table_schema = 'public' \n      AND table_type = 'BASE TABLE'\n      ORDER BY table_name\n    ");case 4:e=a.v,0<e.rows.length?(console.log("\u2705 Found ".concat(e.rows.length," tables:")),e.rows.forEach(function(a){console.log("   - ".concat(a.table_name))})):console.log("\u2139\uFE0F  No tables found (database is empty - ready for migration)"),console.log("\nTest 4: Connection pool information..."),console.log("   Total connections: ".concat(pool.totalCount)),console.log("   Idle connections: ".concat(pool.idleCount)),console.log("   Waiting requests: ".concat(pool.waitingCount)),console.log("\n\u2705 All tests passed! Your Neon database is ready.\n"),console.log("Next step: Run \"npm run migrate\" to create tables and seed data.\n"),a.n=6;break;case 5:a.p=5,f=a.v,console.error("\n\u274C Connection test failed!\n"),console.error("Error details:",f.message),console.error("\n\uD83D\uDCA1 Troubleshooting tips:"),console.error("   1. Check if DATABASE_URL is set correctly in .env file"),console.error("   2. Make sure you copied the full connection string from Neon"),console.error("   3. Verify your internet connection"),console.error("   4. Check if the connection string ends with ?sslmode=require\n"),f.message.includes("ENOTFOUND")?console.error("   \u26A0\uFE0F  DNS lookup failed - check the hostname in your connection string"):f.message.includes("password authentication failed")?console.error("   \u26A0\uFE0F  Invalid credentials - get a fresh connection string from Neon"):f.message.includes("SSL")&&console.error("   \u26A0\uFE0F  SSL error - make sure ?sslmode=require is in the connection string"),process.exit(1);case 6:return a.p=6,a.n=7,pool.end();case 7:return a.f(6);case 8:return a.a(2)}},a,null,[[1,5,6,8]])})),_testConnection.apply(this,arguments)}testConnection();